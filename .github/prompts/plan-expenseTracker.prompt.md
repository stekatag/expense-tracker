## Plan: Еxpense Tracker (Мениджър на разходи)

Този план описва стъпките за създаване на базов CRUD за разходи в Laravel с Inertia.js и Vue. Приложението е проектирано като илюстративно, спазвайки добрите практики на фреймворка. Категориите ще бъдат глобални и заредени чрез Seeder, а управлението на разходите ще се интегрира директно в съществуващия Dashboard.

**Steps**
1. **Създаване на миграции, модели и фабрики**
   - Генериране на модел `Category` (заедно с миграция, фабрика и сийдър). Миграцията ще съдържа колони `id`, `name`, `timestamps`.
   - Генериране на модел `Expense` (заедно с миграция и фабрика). Миграцията ще включва Foreign ключове към `users` и `categories` таблиците (`user_id`, `category_id`), както и `amount` (decimal), `description` (string), `date` (date) и `timestamps`.
2. **Дефиниране на Eloquent релации**
   - Добавяне на метод `expenses` (`hasMany`) в модела `User`.
   - Дефиниране на метод `expenses` (`hasMany`) в бъдещия модел `Category`.
   - Дефиниране на методи `user` и `category` (и двата `belongsTo`) в модела `Expense` за правилно свързване с другите таблици.
3. **Базови данни (Seeding)**
   - Дефиниране на 5-6 основни категории (напр. "Храна", "Дом", "Транспорт") в `CategorySeeder` и регистрирането му в `DatabaseSeeder`.
4. **Създаване на Form Requests и Контролер**
   - Създаване на `StoreExpenseRequest` и `UpdateExpenseRequest` за валидация (напр. задължителна числова сума, задължителен съществуващ `category_id`, валидна дата).
   - Създаване на `ExpenseController` за обработка на `store`, `update`, и `destroy` методите.
5. **Настройване на маршрутите (Routes)**
   - В `web.php` подаване на данните (разходи чрез `->with('category')->latest()->get()` и списък с категории) като пропове към Inertia страницата `/dashboard`.
   - Регистрация на защитени ресурсни пътища (с middleware `auth`) за съответните CRUD операции на разходите към `ExpenseController`.
6. **Интеграция с Vue и Inertia.js**
   - Промяна на `Welcome.vue`, за да изглежда като лендинг страница на "Expense Tracker", с призив за действие "Започни сега" към логин/регистрация.
   - Модифициране на `Dashboard.vue`, за да визуализира подадените през пропове `expenses` и `categories`.
   - Създаване на форма, използваща `useForm` (от Inertia) и Wayfinder за сигурно подаване на заявки към бекенда (`form.submit(store())`).
   - Имплементиране на функционалност за изтриване на запис чрез `destroy.delete(id)`.
7. **Тестване (Pest)**
   - Създаване на Feature тестове с Pest (`php artisan make:test --pest ExpenseTest`), за да подсигурим сигурността и запазването на данните (успешно създаване, валидация на входните данни, забрана за редактиране на чужди разходи).

**Verification**
- Изпълняване на `php artisan migrate:fresh --seed` за инициализация на базата данни.
- Стартиране на `npm run build` за обработка на Vue компонентите.
- Стартиране на тестовете: `php artisan test --compact` за верифициране на функционалността.
- Подсигуряване на валидни пътища: `php artisan wayfinder:generate` (за генериране на типизирани маршрути за фронтенда).

**Decisions**
- Избрахме категориите да са глобални, за да се намали началната логическа сложност, правейки проекта по-добър за обучение.
- Ще използваме Wayfinder, за да импортираме Laravel маршрути като TypeScript/JavaScript функции във Vue компонента, запазвайки строгото типизиране.
- Използваме директно `Dashboard.vue` за цялостния изглед, за да демонстрираме Inertia свойствата (props) без нужда от изграждане на сложна навигация.
